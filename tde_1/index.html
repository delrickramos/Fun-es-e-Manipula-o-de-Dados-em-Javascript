<!doctype html>
<html lang="pt-br">
<head>
  <meta charset="UTF-8">
  <meta name="viewport"
        content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>Funções e Manipulação de Dados</title>
  <style>
    * { box-sizing: border-box; }
    body {
      font-family: Arial, sans-serif;
      background-color: #f0f0f0;
      color: #222;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      min-height: 100vh;
      margin: 0;
      padding: 20px;
    }

    body > h1,
    body > p,
    body > ul {
      max-width: 520px;
      width: 100%;
      margin: 0 auto 8px;
      padding: 0 12px;
      box-sizing: border-box;
      text-align: left;
    }

    h1 {
      color: #2a5db0;
      font-size: 20px;
      margin-bottom: 6px;
    }

    p, ul {
      color: #333;
      font-size: 14px;
      line-height: 1.3;
    }

    .card {
      background: #fff;
      border: 1px solid #ccc;
      padding: 12px;
      margin: 10px 0;
      border-radius: 10px;
      max-width: 520px;
      width: 100%;
      box-shadow: 0 1px 3px rgba(0,0,0,0.04);
    }

    .card h2 {
      margin: 0 0 6px;
      font-size: 16px;
    }

    label {
      display: block;
      margin-top: 8px;
      font-size: 14px;
    }

    input[type="number"],
    select,
    textarea {
      width: 100%;
      padding: 6px;
      margin-top: 4px;
      border: 1px solid #ccc;
      background: #fff;
      border-radius: 6px;
      font-size: 14px;
    }

    button {
      background: #2a5db0;
      color: #fff;
      border: none;
      padding: 8px 10px;
      margin-top: 8px;
      cursor: pointer;
      border-radius: 6px;
      font-size: 14px;
    }

    pre {
      background: #fafafa;
      padding: 8px;
      font-size: 13px;
      overflow: auto;
      border-radius: 6px;
    }

    footer {
      display: block;
      text-align: center;
      color: #666;
      font-size: 13px;
      margin-top: 12px;
      padding: 8px;
      background: #fff;
      border: 1px solid #eee;
      border-radius: 8px;
      max-width: 520px;
      width: 100%;
    }
  </style>
</head>
<body>
<h1>Funções e Manipulação de Dados em Javascript</h1>
<p>Aplicação com intuito de demonstrar o uso de diferentes tipos de funções em Javascript. <br>
  Alguns exemplos de funcionalidades usadas:</p>
<ul>
  <li>Funções nomeadas, anônimas, arrow functions e callbacks. </li>
  <li>Manipulação de array.</li>
</ul>
<div class="card">
  <h2>Operações básicas</h2>
  <p>Insira dois números e escolha a operação desejada:</p>
  <label for="a">Número A:</label>
  <input id="a" type="number" value="" placeholder="Ex: 10" />
  <label for="b">Número B:</label>
  <input id="b" type="number" value="" placeholder="Ex: 3" />

  <label for="op">Operação:</label>
  <select id="op">
    <option value="soma">Soma</option>
    <option value="sub">Subtração</option>
    <option value="mult">Multiplicação</option>
    <option value="div">Divisão</option>
  </select>

  <button id="calc">Calcular</button>
  <p>Resultado: <strong id="res">-</strong></p>
</div>

<div class="card">
  <h2>Manipulação de arrays</h2>
  <p>Digite números separados por vírgula:</p>
  <label for="arrInput">Números:</label>
  <textarea id="arrInput" rows="2" placeholder="Ex: 12, 23, 8"></textarea>
  <button id="filterEven">Filtrar pares</button>
  <button id="average">Calcular média</button>
  <p>Resultado: <strong id="arrRes">-</strong></p>
</div>

<div class="card">
  <h2>Callback - aplicar operação</h2>
  <p>Exemplo de função que recebe outra função (callback):</p>
  <button id="useCallback">Usar callback (ex: soma)</button>
  <p>Resultado: <strong id="cbRes">-</strong></p>
</div>
<footer> Aplicação criada por Délrick Ramos - 2025</footer>
<script>
  // ===== Funções básicas =====
  // Função nomeada:
  function soma(a, b) {
    return Number(a) + Number(b);
  }

  // Função anônima atribuída a uma variável:
  const sub = function(a, b) {
    return Number(a) - Number(b);
  };

  // Arrow functions:
  const mult = (a, b) => Number(a) * Number(b);
  const div = (a, b) => {
    if (Number(b) === 0) return 'Erro: divisão por zero';
    return Number(a) / Number(b);
  };

  // ===== Manipulação de arrays =====

  // Função que filtra números pares (usa arrow function internamente):
  function filtrarPares(arr) {
    // converte pra número e filtra
    return arr.map(n => Number(n)).filter(n => n % 2 === 0);
  }

  // Função que calcula média (usa reduce e arrow):
  function calcularMedia(arr) {
    const nums = arr.map(n => Number(n));
    if (nums.length === 0) return 0;
    const soma = nums.reduce((acc, n) => acc + n, 0);
    return soma / nums.length;
  }

  // ===== Callback =====
  // Função que recebe outra função como parâmetro
  function aplicarOperacao(a, b, operacaoCallback) {
    // operacaoCallback deve ser uma função (ex: soma, sub, mult, div)
    return operacaoCallback(a, b);
  }

  // ===== Hooks da UI =====
  const elA = document.getElementById('a');
  const elB = document.getElementById('b');
  const elOp = document.getElementById('op');
  const elRes = document.getElementById('res');

  document.getElementById('calc').addEventListener('click', () => {
    const a = elA.value;
    const b = elB.value;
    const op = elOp.value;
    let resultado;
    let explicacao = '';

    if (op === 'soma') {
      resultado = soma(a, b); // Chama função nomeada
      explicacao = `soma(${a}, ${b}) => ${resultado}`;
    } else if (op === 'sub') {
      resultado = sub(a, b); // Função anônima
      explicacao = `sub(${a}, ${b}) => ${resultado}`;
    } else if (op === 'mult') {
      resultado = mult(a, b); // Arrow
      explicacao = `mult(${a}, ${b}) => ${resultado}`;
    } else if (op === 'div') {
      resultado = div(a, b); // Arrow com checagem
      explicacao = `div(${a}, ${b}) => ${resultado}`;
    }

    elRes.textContent = resultado;
    console.log('Cálculo:', explicacao);
  });

  // Array UI
  const arrInput = document.getElementById('arrInput');
  const arrRes = document.getElementById('arrRes');

  function parseInputToArray(text) {
    if (!text) return [];
    return text.split(',').map(s => s.trim()).filter(s => s !== '').map(Number);
  }

  document.getElementById('filterEven').addEventListener('click', () => {
    const arr = parseInputToArray(arrInput.value);
    const pares = filtrarPares(arr);
    arrRes.textContent = pares.length ? pares.join(', ') : 'Nenhum par encontrado';
    console.log('pares:', pares);
  });

  document.getElementById('average').addEventListener('click', () => {
    const arr = parseInputToArray(arrInput.value);
    const media = calcularMedia(arr);
    arrRes.textContent = isNaN(media) ? 'Erro' : media;
    console.log('média:', media);
  });

  // Exemplo de Callback
  const cbRes = document.getElementById('cbRes');
  document.getElementById('useCallback').addEventListener('click', () => {
    const a = 7;
    const b = 5;
    // Função soma como callback (função nomeada)
    const r1 = aplicarOperacao(a, b, soma);
    // Também pode ser passado uma arrow function direto
    const r2 = aplicarOperacao(a, b, (x, y) => x * y + 1); // Arrow usada aqui

    cbRes.textContent = `soma: ${r1} | exemplo arrow callback: ${r2}`;
    console.log('callback r1:', r1, 'r2:', r2);
  });

  // Pequena demonstração no console (trail):
  console.log('Testes rápidos: soma(2,3)=', soma(2,3));
  console.log('sub(5,2)=', sub(5,2));
  console.log('mult(3,4)=', mult(3,4));
  console.log('div(8,2)=', div(8,2));

</script>
</body>
</html>
